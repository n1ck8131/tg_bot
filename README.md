# Birthday Party Bot

Telegram-–±–æ—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –¥–Ω—è —Ä–æ–∂–¥–µ–Ω–∏—è —Å –∏–≥—Ä–∞–º–∏, –∫–æ–Ω–∫—É—Ä—Å–∞–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–æ–π.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéÆ –î–ª—è –≥–æ—Å—Ç–µ–π

**–í –≥—Ä—É–ø–ø–æ–≤–æ–º —á–∞—Ç–µ:**
- `/start` ‚Äî –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–∏ (–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è, –≤—ã–µ–∑–¥, –≤–∏—à–ª–∏—Å—Ç)
- –ì–µ–æ–ø–æ–∑–∏—Ü–∏—è –º–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–ª–µ–π–ª–∏—Å—Ç–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–∏

**–í –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –±–æ—Ç—É:**
- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–∞ –∏–≥—Ä—É "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"
- –£—á–∞—Å—Ç–∏–µ –≤ —Ñ–æ—Ç–æ-–∫–æ–Ω–∫—É—Ä—Å–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∏

### üë®‚Äçüíº –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä–∞ (–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)

| –§—É–Ω–∫—Ü–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| üì∏ –§–æ—Ç–æ-–∫–æ–Ω–∫—É—Ä—Å | –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω–∫—É—Ä—Å–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–µ–º (–º–∞–∫—Å. 22 —É—á–∞—Å—Ç–Ω–∏–∫–∞) |
| üèÜ –¢—É—Ä–Ω–∏—Ä –±–∏—Ä-–ø–æ–Ω–≥–∞ | –¢—É—Ä–Ω–∏—Ä–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–º–∞–Ω–¥ –∏ —Å–µ—Ç–∫–∏ –ø–ª–µ–π-–æ—Ñ—Ñ |
| üî™ –î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏ | –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –∏–≥—Ä–∞ —Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–µ–π, –∫–æ–ª—å—Ü–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∑–∞–¥–∞–Ω–∏–π –∏ —Ñ–∏–Ω–∞–ª—å–Ω—ã–º –æ—Ç—á—ë—Ç–æ–º |
| üìä –û–ø—Ä–æ—Å—ã | –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–æ–≤ —Å –æ–¥–Ω–∏–º –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ –æ—Ç–≤–µ—Ç–∞ |
| üì¢ Broadcast | –û—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –≤ –≥—Ä—É–ø–ø–æ–≤–æ–π —á–∞—Ç |
| üìç –ì–µ–æ–ø–æ–∑–∏—Ü–∏—è | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è |
| üéµ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–∞ | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç –≤–µ—á–µ—Ä–∏–Ω–∫–∏ |
| ‚úâÔ∏è –û—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è | –ü—Ä—è–º–æ–π –æ—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –≥–æ—Å—Ç–µ–π –∏–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ |

## üî™ –ò–≥—Ä–∞ "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"

–ì–ª–∞–≤–Ω–∞—è —Ñ–∏—à–∫–∞ –±–æ—Ç–∞ ‚Äî –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–≥—Ä–∞ –¥–ª—è –≤–µ—á–µ—Ä–∏–Ω–∫–∏:

### –ö–∞–∫ –∏–≥—Ä–∞—Ç—å

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:** –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é, –≥–æ—Å—Ç–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è –≤ –ª–∏—á–∫–µ –±–æ—Ç–∞
2. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞:** –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –∑–∞–¥–∞—ë—Ç —Å–ø–∏—Å–∫–∏ –æ—Ä—É–∂–∏–π –∏ –ª–æ–∫–∞—Ü–∏–π (–µ—Å—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ)
3. **–°—Ç–∞—Ä—Ç:** –ö–∞–∂–¥—ã–π –∏–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–¥–∞–Ω–∏–µ: —Ü–µ–ª—å (–¥—Ä—É–≥–æ–π –∏–≥—Ä–æ–∫), –æ—Ä—É–∂–∏–µ –∏ –ª–æ–∫–∞—Ü–∏—é
4. **–ò–≥—Ä–∞:** –ò–≥—Ä–æ–∫–∏ "—É–±–∏–≤–∞—é—Ç" —Å–≤–æ–∏ —Ü–µ–ª–∏, –∂–µ—Ä—Ç–≤–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–º–µ—Ä—Ç—å –∫–Ω–æ–ø–∫–æ–π "–Ø –º—ë—Ä—Ç–≤"
5. **–¶–µ–ø–æ—á–∫–∞:** –ü–æ—Å–ª–µ —Å–º–µ—Ä—Ç–∏ —É–±–∏–π—Ü–∞ –ø–æ–ª—É—á–∞–µ—Ç —Ü–µ–ª—å —Å–≤–æ–µ–π –∂–µ—Ä—Ç–≤—ã —Å –Ω–æ–≤—ã–º –æ—Ä—É–∂–∏–µ–º/–ª–æ–∫–∞—Ü–∏–µ–π
6. **–ü–æ–±–µ–¥–∞:** –ò–≥—Ä–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∂–∏–≤—à–µ–≥–æ
7. **–û—Ç—á—ë—Ç:** –í –∫–æ–Ω—Ü–µ ‚Äî –ø–æ–ª–Ω–∞—è —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è —É–±–∏–π—Å—Ç–≤ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∏ –ø—É—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–æ–Ω–∞:** "–∫—É—Ä–∏–ª–∫–∞" ‚Äî —É–±–∏–π—Å—Ç–≤–∞ —Ç–∞–º –∑–∞–ø—Ä–µ—â–µ–Ω—ã
- **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** SQLite –±–∞–∑–∞, –∏–≥—Ä–∞ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –±–æ—Ç–∞
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º:** –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –ø—Ä–æ–≥–Ω–∞—Ç—å –∏–≥—Ä—É —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å:** –ê–Ω–æ–Ω—Å—ã —Å–º–µ—Ä—Ç–µ–π –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—é—Ç —É–±–∏–π—Ü—É
- **–î–æ 22 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤:** –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–º–ø–∞–Ω–∏–π
- **–ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:** –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
- **–£—Å—Ç—Ä–∞—à–∞—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è:** –ê—Ç–º–æ—Å—Ñ–µ—Ä–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –¥–ª—è –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –∏–≥—Ä—É

### –ê–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–∏

- **–û—Ç–∫—Ä—ã—Ç–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏** ‚Äî –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Ä—É–∂–∏–π –∏ –ª–æ–∫–∞—Ü–∏–π** ‚Äî –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å–ø–∏—Å–∫–∏ (–ª–æ–∂–∫–∞, –≤–∏–ª–∫–∞, –Ω–æ—Å–æ–∫...)
- **–ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ü–µ–ª–µ–π –ø–æ –∫–æ–ª—å—Ü—É
- **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** ‚Äî —Å–∏–º—É–ª—è—Ü–∏—è —Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏** ‚Äî –ø–æ—à–∞–≥–æ–≤–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–π –∏–≥—Ä–æ–π
- **–§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç** ‚Äî —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—è —Å –≤—Ä–µ–º–µ–Ω–µ–º + –ø—É—Ç—å –ø–æ–±–µ–¥–∏—Ç–µ–ª—è

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Python 3.11+**
- **aiogram 3.4+** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram Bot API
- **SQLite** ‚Äî –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –∏–≥—Ä—ã "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"
- **yandex-music** ‚Äî API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–æ–π
- **python-dotenv** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **tzdata** ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∞—Å–æ–≤—ã—Ö –ø–æ—è—Å–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ handlers/             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin.py          # –ö–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ group.py          # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ tournament.py     # –¢—É—Ä–Ω–∏—Ä –±–∏—Ä-–ø–æ–Ω–≥–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ spy_game.py       # –ò–≥—Ä–∞ "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏" (1000+ —Å—Ç—Ä–æ–∫)
‚îÇ   ‚îú‚îÄ‚îÄ services/             # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (—Å–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ yandex_music.py   # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–æ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photo_contest.py  # –õ–æ–≥–∏–∫–∞ —Ñ–æ—Ç–æ-–∫–æ–Ω–∫—É—Ä—Å–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ knives_game.py    # –õ–æ–≥–∏–∫–∞ –∏–≥—Ä—ã "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"
‚îÇ   ‚îú‚îÄ‚îÄ assets/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ photo1.jpg        # –§–æ—Ç–æ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ photo2.jpg        # –§–æ—Ç–æ –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ bot.py                # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ callbacks.py          # Callback-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã –¥–ª—è inline-–∫–Ω–æ–ø–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ constants.py          # –û–±—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã (regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –ª–∏–º–∏—Ç—ã)
‚îÇ   ‚îú‚îÄ‚îÄ database.py           # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–≥—Ä—ã "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"
‚îÇ   ‚îú‚îÄ‚îÄ filters.py            # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ keyboards.py          # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –∏ –º–µ–Ω—é
‚îÇ   ‚îú‚îÄ‚îÄ messages.py           # –¢–µ–∫—Å—Ç—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —ç–º–æ–¥–∑–∏
‚îÇ   ‚îú‚îÄ‚îÄ middleware.py         # Middleware (rate limiting)
‚îÇ   ‚îú‚îÄ‚îÄ states.py             # FSM-—Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ storage.py            # In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö —Å TTL
‚îÇ   ‚îî‚îÄ‚îÄ tournament_utils.py   # –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç—É—Ä–Ω–∏—Ä–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
‚îú‚îÄ‚îÄ .env.example              # –ü—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ run.py                    # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ amvera.yml                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ Amvera
‚îî‚îÄ‚îÄ assassin_game.db          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–≥—Ä—ã (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/n1ck8131/tg_bot.git
cd tg_bot
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
python -m venv venv

# Windows
venv\Scripts\activate

# Linux/macOS
source venv/bin/activate
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ `.env.example` –≤ `.env` –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è:

```bash
cp .env.example .env
```

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```env
# –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –æ—Ç @BotFather
BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz

# ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (—É–∑–Ω–∞—Ç—å —É @userinfobot)
ADMIN_ID=123456789

# ID –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞ (–¥–æ–±–∞–≤—å—Ç–µ @RawDataBot –≤ –≥—Ä—É–ø–ø—É, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ chat.id)
GROUP_ID=-1001234567890
```

#### –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

```env
# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–Ω–µ —Ä–æ–∂–¥–µ–Ω–∏—è (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å —Ñ–æ—Ç–æ)
BIRTHDAY_INFO=üéâ *–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è:*\n\nüè° *–ì–æ—Å—Ç–µ–≤–æ–π –∫–æ–º–ø–ª–µ–∫—Å SandittenSpa*\nüìç –ü–æ—Å–µ–ª–æ–∫ –õ—É–Ω–∏–Ω–æ

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–µ–∑–¥–µ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –≥–µ–æ–ø–æ–∑–∏—Ü–∏–µ–π)
TRIP_INFO=üöó *–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã–µ–∑–¥–µ*\n\nüìÖ *–î–∞—Ç–∞:* 4 –∞–ø—Ä–µ–ª—è\n‚è∞ *–í—Ä–µ–º—è:* 14:30

# –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–∏—à–ª–∏—Å—Ç
WISHLIST_URL=https://example.com/wishlist
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

```env
# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –≤ –æ—Ç—á—ë—Ç–∞—Ö)
TIMEZONE=Europe/Vilnius

# –Ø–Ω–¥–µ–∫—Å –ú—É–∑—ã–∫–∞ (–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç—Ä–µ–∫–æ–≤ –≤ –ø–ª–µ–π–ª–∏—Å—Ç)
YANDEX_MUSIC_TOKEN=your_yandex_music_token
YANDEX_PLAYLIST_KIND=1234
```

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
python run.py
```

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –∏ ID

### BOT_TOKEN

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/newbot` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω

### ADMIN_ID

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@userinfobot](https://t.me/userinfobot) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–∞—à ID

### GROUP_ID

1. –î–æ–±–∞–≤—å—Ç–µ –±–æ—Ç–∞ [@RawDataBot](https://t.me/RawDataBot) –≤ –≥—Ä—É–ø–ø—É
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `chat.id` –∏–∑ –æ—Ç–≤–µ—Ç–∞ (–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ)
3. –£–¥–∞–ª–∏—Ç–µ RawDataBot –∏–∑ –≥—Ä—É–ø–ø—ã

### YANDEX_MUSIC_TOKEN (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ [music.yandex.ru](https://music.yandex.ru)
2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Application ‚Üí Cookies
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ `Session_id`

### YANDEX_PLAYLIST_KIND

1. –û—Ç–∫—Ä–æ–π—Ç–µ –Ω—É–∂–Ω—ã–π –ø–ª–µ–π–ª–∏—Å—Ç –≤ –Ø–Ω–¥–µ–∫—Å.–ú—É–∑—ã–∫–µ
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —á–∏—Å–ª–æ –∏–∑ URL: `music.yandex.ru/users/USERNAME/playlists/PLAYLIST_KIND`

## üåê –î–µ–ø–ª–æ–π –Ω–∞ Amvera

–ü—Ä–æ–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ [Amvera](https://amvera.ru):

### –®–∞–≥–∏ –¥–ª—è –¥–µ–ø–ª–æ—è

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ Amvera** ‚Äî https://amvera.ru
2. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç** –≤ –ø–∞–Ω–µ–ª–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
3. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** ‚Äî `n1ck8131/tg_bot`
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env.example`
5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π** ‚Äî Amvera –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - –û–±–Ω–∞—Ä—É–∂–∏—Ç `amvera.yml`
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`
   - –ó–∞–ø—É—Å—Ç–∏—Ç `run.py`

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (amvera.yml)

```yaml
meta:
  environment: python
  toolchain:
    name: pip
    version: "3.11"

build:
  requirementsPath: requirements.txt

run:
  scriptName: run.py
  persistenceMount: /data
```

**–í–∞–∂–Ω–æ:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `assassin_game.db` –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ.

## üèó –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ë–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º—É —Ä–æ—É—Ç–µ—Ä–æ–≤ aiogram –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏:

- `admin_router` ‚Äî –∫–æ–º–∞–Ω–¥—ã –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–ª–∏—á–Ω—ã–π —á–∞—Ç)
- `assassin_router` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–≥—Ä—ã "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"
- `tournament_router` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Ç—É—Ä–Ω–∏—Ä–∞ –±–∏—Ä-–ø–æ–Ω–≥–∞
- `user_router` ‚Äî –∫–æ–º–∞–Ω–¥—ã –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ª–∏—á–Ω—ã–π —á–∞—Ç)
- `group_router` ‚Äî –∫–æ–º–∞–Ω–¥—ã –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞

### FSM (Finite State Machine)

–î–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏—è:

- `AskState` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä—É
- `AddTrackState` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞ –≤ –ø–ª–µ–π–ª–∏—Å—Ç
- `GeoState` ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –≥–µ–æ–ø–æ–∑–∏—Ü–∏–∏
- `AdminBroadcastState` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
- `AdminPollState` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞ (–æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—Ç–≤–µ—Ç–æ–≤)
- `TournamentState` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–æ–º
- `AssassinState` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–π "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"

### –•—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–∞–Ω–Ω—ã—Ö

#### In-memory (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)

- `polls_storage` ‚Äî –æ–ø—Ä–æ—Å—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏–π (TTL: 24 —á–∞—Å–∞)
- `photo_contest_storage` ‚Äî —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–Ω–∫—É—Ä—Å–∞ (–º–∞–∫—Å. 22 —É—á–∞—Å—Ç–Ω–∏–∫–∞)
- `forwarded_messages_storage` ‚Äî —Å–≤—è–∑—å –ø–µ—Ä–µ—Å–ª–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (TTL: 1 —á–∞—Å)
- `location_storage` ‚Äî –≥–µ–æ–ø–æ–∑–∏—Ü–∏—è –º–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è
- `tournament_storage` ‚Äî —Ç—É—Ä–Ω–∏—Ä –±–∏—Ä-–ø–æ–Ω–≥–∞

#### SQLite (–ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ)

–ò–≥—Ä–∞ "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ SQLite (`assassin_game.db`):

- `game` ‚Äî –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–∞—Ö (—Å—Ç–∞—Ç—É—Å, —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º, –ø–æ–±–µ–¥–∏—Ç–µ–ª—å)
- `player` ‚Äî –∏–≥—Ä–æ–∫–∏ (—Ä–µ–∞–ª—å–Ω—ã–µ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ)
- `contract` ‚Äî –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è (—É–±–∏–π—Ü–∞ ‚Üí —Ü–µ–ª—å + –æ—Ä—É–∂–∏–µ + –ª–æ–∫–∞—Ü–∏—è)
- `kill_log` ‚Äî –∏—Å—Ç–æ—Ä–∏—è —É–±–∏–π—Å—Ç–≤ —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
- `weapon` ‚Äî —Å–ø–∏—Å–æ–∫ –æ—Ä—É–∂–∏–π
- `location` ‚Äî —Å–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π

**–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ. –î–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–∂–∏–≤–∞—é—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏ –±–æ—Ç–∞.**

### Middleware –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–ë–æ—Ç –∑–∞—â–∏—â–µ–Ω –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π:

- **Rate Limiting** ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (10 —Å–æ–æ–±—â–µ–Ω–∏–π/30 —Å–µ–∫, 20 callback/30 —Å–µ–∫)
- **Markdown Sanitization** ‚Äî —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–º –≤–≤–æ–¥–µ
- **Error Handling** ‚Äî –≥–ª–æ–±–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **Graceful Shutdown** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- **Race Condition Prevention** ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- **Database Transactions** ‚Äî –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ë–î

### –§–∏–ª—å—Ç—Ä—ã

–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (`app/filters.py`):

- `IsAdminPrivateFilter` ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- `IsUserPrivateFilter` ‚Äî –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –æ–±—ã—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `IsGroupChatFilter` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ —á–∞—Ç–∞

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[ASSASSIN_TESTING_GUIDE.md](ASSASSIN_TESTING_GUIDE.md)** ‚Äî –ø–æ–¥—Ä–æ–±–Ω—ã–π –≥–∞–π–¥ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é –∏–≥—Ä—ã "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"
- **[CONFIGURATION_GUIDE.md](CONFIGURATION_GUIDE.md)** ‚Äî –≥–∞–π–¥ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±–æ—Ç–∞
- **[DEPLOYMENT_CHECKLIST.md](DEPLOYMENT_CHECKLIST.md)** ‚Äî —á–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –¥–µ–ø–ª–æ—é
- **[CLAUDE.md](CLAUDE.md)** ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–¥–ª—è Claude Code)

## üîß –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è production-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** ‚Äî –∑–∞–º–µ–Ω–∏—Ç—å in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –Ω–∞ Redis (–∫—Ä–æ–º–µ –∏–≥—Ä—ã, –æ–Ω–∞ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite)
2. **Webhook-—Ä–µ–∂–∏–º** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –≤–º–µ—Å—Ç–æ polling –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ª–æ–≥–æ–≤ –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Sentry, ELK)
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (Prometheus) –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
5. **Backup –ë–î** ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ `assassin_game.db`

### –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- ‚úÖ **Graceful shutdown** ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–∫—Ä—ã—Ç–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ
- ‚úÖ **Rate limiting** ‚Äî –∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –∏ DoS –∞—Ç–∞–∫
- ‚úÖ **Global error handler** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ **SQLite –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** ‚Äî –∏–≥—Ä–∞ "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏" –ø–µ—Ä–µ–∂–∏–≤–∞–µ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∏
- ‚úÖ **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å** ‚Äî –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω—ã

## üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –∏–≥—Ä—ã "–î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞: `python run.py`
2. –ù–∞–ø–∏—à–∏—Ç–µ –±–æ—Ç—É –≤ –ª–∏—á–∫—É –æ—Ç –∞–¥–º–∏–Ω–∞
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"üî™ –î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"**
4. –í—ã–±–µ—Ä–∏—Ç–µ **"üß™ –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º"**
5. –°–æ–∑–¥–∞–π—Ç–µ 3-4 –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –∏–≥—Ä–æ–∫–∞
6. –ù–∞–∂–º–∏—Ç–µ **"üéÆ –î–æ—Å—Ç–∞—Ç—å –Ω–æ–∂–∏"** –¥–ª—è —Å—Ç–∞—Ä—Ç–∞
7. –£–ø—Ä–∞–≤–ª—è–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º–∏ –∏–≥—Ä–æ–∫–∞–º–∏ —á–µ—Ä–µ–∑ **"üë• –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∏–≥—Ä–æ–∫–∏"**
8. –°–∏–º—É–ª–∏—Ä—É–π—Ç–µ —Å–º–µ—Ä—Ç–∏ –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–∂–∏–≤—à–µ–≥–æ
9. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç –≤ –ª–∏—á–∫–µ

–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [ASSASSIN_TESTING_GUIDE.md](ASSASSIN_TESTING_GUIDE.md)

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ç–∏–Ω–≥

–ü—Ä–∏ –≤–Ω–µ—Å–µ–Ω–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π:

1. –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã–Ω–æ—Å–∏—Ç–µ –≤ `app/constants.py`
2. –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è ‚Äî –≤ `app/messages.py`
3. –í—Å–µ callback-–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã ‚Äî –≤ `app/callbacks.py`
4. –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
5. –°–ª–µ–¥—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Å—Ç–∏–ª—é –∫–æ–¥–∞

## ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ –±–æ—Ç–∞

–í—Å–µ —Ç–µ–∫—Å—Ç—ã –±–æ—Ç–∞ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**–§–∞–π–ª —Å —Ç–µ–∫—Å—Ç–∞–º–∏:** `app/messages.py`

üìñ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** [`TEXTS.md`](TEXTS.md)

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `app/messages.py`
2. –ù–∞–π–¥–∏—Ç–µ –Ω—É–∂–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `WELCOME_USER`, `TRACK_ADDED`)
3. –ò–∑–º–µ–Ω–∏—Ç–µ —Ç–µ–∫—Å—Ç
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞

**–ü—Ä–∏–º–µ—Ä—ã:**
```python
# –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
WELCOME_USER = "–ü—Ä–∏–≤–µ—Ç! üëã\n\n–Ø –±–æ—Ç –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤–µ—á–µ—Ä–∏–Ω–∫–∏."

# –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ç—Ä–µ–∫–∞
TRACK_ADDED = "–¢—Ä–µ–∫ –¥–æ–±–∞–≤–ª–µ–Ω!\n\n*{title}*\n–î–æ–±–∞–≤–∏–ª: {user}"

# –ù–∞–¥–ø–∏—Å—å –Ω–∞ –∫–Ω–æ–ø–∫–µ
ButtonLabels.ADD_TRACK = "üéµ –î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ–∫"
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–∞:**
- `Messages` ‚Äî –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç–∞ (–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è, –æ—à–∏–±–∫–∏, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è)
- `ButtonLabels` ‚Äî –Ω–∞–¥–ø–∏—Å–∏ –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö
- `Emojis` ‚Äî —ç–º–æ–¥–∑–∏ –¥–ª—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ù–ï —É–¥–∞–ª—è–π—Ç–µ `{–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ}` –≤ —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö
- –ù–ï –º–µ–Ω—è–π—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–Ω—Å—Ç–∞–Ω—Ç
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–π—Ç–µ –±–æ—Ç–∞ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

MIT

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

Vsevolod Kulikov ([@vsevolodkulikov](https://github.com/n1ck8131))

---

**–°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é [Claude Code](https://claude.com/claude-code) ü§ñ**
